<!DOCTYPE html>
<html>
<head>
	<title>Product Detail</title>
	<link rel="stylesheet" type="text/css" href="../css/product_detail.css"/>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Mulish&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">
</head>
<body>	

	<!--header paling atas-->
	<div id="top">
		<div class="d-block sticky-top header">
			<div class="row sticky-top justify-content-center isi-header">
				<div class="col-md-2 logo">
					<img src="../images/logo.png">
				</div>
				<div class="col-md-6 search">
					<input type="text" name="search-input" placeholder="&#xF002; Search skincare...">
				</div>
				<div class="col-md-2 cart">
					<a class="isi-cart" href="cart.html" id="jml-item"><div class="material-icons-outlined">shopping_cart</div>Cart: 0</a>
				</div>
				<div class="col-md-2 account">
					<div class="dropdown">
						<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<span class="material-icons-outlined">account_circle</span> Account
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
							<a class="dropdown-item" href="#">Hello, Dear Costumer!</a>
	  						<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="#"><span class="material-icons-outlined">settings</span>Account Setting</a>
							<a class="dropdown-item" href="#"><span class="material-icons-outlined">exit_to_app</span>Logout</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!--nav di bawah header-->
		<div class="d-block nav">
			<div class="row justify-content-center isi-nav">
				<div class="col-md-12 flex-left nav-home">
					<ul>
						<li class="first"><a href="landing.html">Home</a></li>
						<li><a href="product_list.html">Product</a></li>
						<li><a href="compare.html">Comparison</a></li>
						<li><a href="#">Care Guide</a></li>					  
					</ul>
				</div>
			</div>
		</div>
	</div>

	<!--space-->
	<div class="row space"></div>

	<!--isi konten nya di siniii-->
	<div class="my-container">
		<div class="row product">
			<div class="col-6 text-center product-pic" id="product-image">
					FOTO PRODUK
			</div>
			<div class="col-6 product-detail">
				<div class="nama" id="product-name">
					
				</div>
				<div class="harga" id="product-price">
					
				</div>
				<div class="stock" id="product-stock">
					
				</div>
				<span id="add-cart"><button class="cart-btn">Tambahkan ke Cart</button> <br></span>
				<button class="beli-btn">Beli Sekarang</button>
			</div>
		</div>

		<div class="description">
			<div class="tab">
				<button class="tablinks" onclick="openTab(event, 'deskripsi')" id="defaultOpen">DESKRIPSI</button>
				<button class="tablinks" onclick="openTab(event, 'ulasan')">ULASAN</button>
			</div>

			<div id="deskripsi" class="tabcontent">
				
			</div>

			<div id="ulasan" class="tabcontent">
				<h3>Ulasan</h3>
				<p>Sangat cocok di kulit dan mudah juga untuk digunakan.</p> 
			</div>
		</div>
	</div>

	<!--F O O T E R-->
	<div class="footer">
		<span>
			Dermanifest | Email: teamhilkom19unj@gmail.com <br> Copyright &#169; 2020 Documentation Department <br>
		</span>
		<span class="logo">
			<img src="../images/logo.png">
		</span>
	</div>
</body>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

<!----hide / reaveal header saat scroll down / up------>
<script>
	var prevScrollpos = window.pageYOffset;
	window.onscroll = function() {
	var currentScrollPos = window.pageYOffset;
		 if (prevScrollpos > currentScrollPos) {
		   document.getElementById("top").style.top = "0";
		 } else {
		   document.getElementById("top").style.top = "-150px";
		  }
		 prevScrollpos = currentScrollPos;
	}
</script>

<!---untuk menampilkan tab detail dan ulasan---->
<script>
	function openTab(evt, tabName) {
		var i, tabcontent, tablinks;
	 	tabcontent = document.getElementsByClassName("tabcontent");
	 	for (i = 0; i < tabcontent.length; i++) {
	   		tabcontent[i].style.display = "none";
	 	}
	 	tablinks = document.getElementsByClassName("tablinks");
	 	for (i = 0; i < tablinks.length; i++) {
	   		tablinks[i].className = tablinks[i].className.replace(" active", "");
		}
	 	document.getElementById(tabName).style.display = "block";
		evt.currentTarget.className += " active";
	}
	document.getElementById("defaultOpen").click();
</script>

<!----untuk menampilkan detail produk---->
<script type="text/javascript" src="https://cdn.chec.io/v2/commerce.js"></script>
<script>
	const commerce = new Commerce('pk_198151521f223e07df237e6a4e021d27b0114da5ccaef', true);
	commerce.products.retrieve(window.location.search.replace('?id=', ''))
		.then((item) => {
			document.querySelector('#product-name').innerHTML = `
				<h2>${item.name}</h2>
			`;
			document.querySelector('#product-price').innerHTML = item.price.formatted_with_symbol;
			document.querySelector('#product-image').innerHTML = `
				<img src="${item.media.source}" />
			`;
			document.querySelector('#product-stock').innerHTML = `Stock: ${item.quantity}`;
			document.querySelector('#deskripsi').innerHTML = item.description;
			document.querySelector('#add-cart').innerHTML = 
			`<button class="cart-btn" onclick="addToCart('${item.id}');">Add to cart</button> <br>`;
		});

	//Menampilkan jumlah item dalam cart
	commerce.cart.retrieve('cart_3wpJXYgAm6ZE75').then((cart) => {
			console.log(cart)

			document.querySelector('#jml-item').innerHTML = `<div class="material-icons-outlined">shopping_cart</div> Cart: ${cart.total_items}`;
	});

	//Add to cart
	function addToCart(prod_id){
			commerce.cart.add(prod_id, 1).then(json => {
				console.log(json)
			});
			commerce.cart.retrieve('cart_3wpJXYgAm6ZE75').then((cart) => {
			console.log(cart)

			document.querySelector('#jml-item').innerHTML = `<div class="material-icons-outlined">shopping_cart</div> Cart: ${cart.total_items}`;

			location.reload();
				return false;
		});
			alert("Produk sudah ditambahkan ke Cart!")		
		};
</script>

</html>
