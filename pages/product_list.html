<!DOCTYPE html>
<html>
<head>
	<title>Product List</title>
	<link rel="stylesheet" type="text/css" href="../css/product_list.css"/>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Mulish&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp" rel="stylesheet">
</head>
<body>	
	<!--header paling atas-->
	<div id="top">
		<div class="d-block sticky-top header">
			<div class="row sticky-top justify-content-center isi-header">
				<div class="col-md-2 logo">
					<img src="../images/logo.png">
				</div>
				<div class="col-md-6 search">
					<input type="text" name="search-input" placeholder="&#xF002; Search skincare...">
				</div>
				<div class="col-md-2 cart">
					<a class="isi-cart" href="cart.html" id="jml-item"><div class="material-icons-outlined">shopping_cart</div>Cart: 0</a>
				</div>
				<div class="col-md-2 account">
					<div class="dropdown">
						<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
							<span class="material-icons-outlined">account_circle</span> Account
						</button>
						<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
							<a class="dropdown-item" href="#">Hello, Dear Costumer!</a>
	  						<div class="dropdown-divider"></div>
							<a class="dropdown-item" href="#"><span class="material-icons-outlined">settings</span>Account Setting</a>
							<a class="dropdown-item" href="#"><span class="material-icons-outlined">exit_to_app</span>Logout</a>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!--nav di bawah header-->
		<div class="d-block nav">
			<div class="row justify-content-center isi-nav">
				<div class="col-md-12 flex-left nav-home">
					<ul>
						<li class="first"><a href="landing.html">Home</a></li>
						<li><a href="product_list.html">Product</a></li>
						<li><a href="compare.html">Comparison</a></li>
						<li><a href="#">Care Guide</a></li>				  
					</ul>
				</div>
			</div>
		</div>
	</div>

	<!--space-->
	<div class="row space"></div>

	<!--bagian list product-->
	<div class="my-container">
		<div class="row my-content">

			<!----------------bagian produk---------------->
			<div class="col-md-10 list">
				<div class="row mar-left">
					<h1>Produk</h1>
				</div>

				<div class="row" id="wrapper">
					<div class="lds-roller"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
				</div>
			</div>
		</div>
	</div>

	<div class="footer">
		<span>
			Dermanifest | Email: teamhilkom19unj@gmail.com <br> Copyright &#169; 2020 Documentation Department <br>
		</span>
		<span class="logo">
			<img src="../images/logo.png">
		</span>
	</div>
</body>

	<!--Hide & Reveal Header-->
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script></script>
	<script>
		var prevScrollpos = window.pageYOffset;
		window.onscroll = function() {
		var currentScrollPos = window.pageYOffset;
		  if (prevScrollpos > currentScrollPos) {
		    document.getElementById("top").style.top = "0";
		  } else {
		    document.getElementById("top").style.top = "-150px";
		  }
		  prevScrollpos = currentScrollPos;
		}
	</script>

	<!--============================COMMERCE.JS==================================-->
	<script type="text/javascript" src="https://cdn.chec.io/v2/commerce.js"></script>
	<script defer>
		const commerce = new Commerce('pk_198151521f223e07df237e6a4e021d27b0114da5ccaef', true);

		//Output List Produk
		commerce.products.list().then((products) => {
		console.log(products)

		let product = '';

		products.data.forEach((item) => {
		  product += `<div class="col-md-4 col-sm-6 prod">
			            <div class="product-grid6">
			                <div class="product-image6">
			                    <a href="product_detail.html?id=${item.id}">
			                        <img class="pic-1" src="${item.media.source}">
			                    </a>
			                </div>
			                <div class="product-content">
			                    <h3 class="title"><a href="#">${item.name}</a></h3>
			                    <div class="price">${item.price.formatted_with_symbol}
			                    </div>
			                </div>
			                <ul class="social">
			                    <li><a href="product_detail.html?id=${item.id}" id="detail" data-tip="Product Detail"><i class="fa fa-search"></i></a></li>
			                    <li><a href="#" data-tip="Add to Cart" onclick="addToCart('${item.id}');"><i class="fa fa-shopping-cart"></i></a></li>
			                </ul>
			            </div>
			        </div>`;
		});

		document.querySelector('#wrapper').innerHTML = product;
		});

		//Menampilkan jumlah item dalam cart
		commerce.cart.retrieve('cart_3wpJXYgAm6ZE75').then((cart) => {
			console.log(cart)

			document.querySelector('#jml-item').innerHTML = `<div class="material-icons-outlined">shopping_cart</div> Cart: ${cart.total_items}`;

		});

		//Add to Cart
		function addToCart(prod_id){
			commerce.cart.add(prod_id, 1).then(json => {
				console.log(json)
			});
			commerce.cart.retrieve('cart_3wpJXYgAm6ZE75').then((cart) => {
			console.log(cart)

			document.querySelector('#jml-item').innerHTML = `<div class="material-icons-outlined">shopping_cart</div> Cart: ${cart.total_items}`;

			location.reload();
				return false;
		});
			alert("Produk sudah ditambahkan ke Cart!")

		};
	</script>
</html>
